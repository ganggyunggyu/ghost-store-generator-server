def getKoPrompt(
    theme: str = "가문/고문서/오니 추정 삽화/식인 풍습",
    era: str = "에도 후기→쇼와 초 혼재 추정",
    region_hint: str = "나가노현 산골",
    gore_level: int = 1,
    target_chars: int = 30000,
    topk: int = 5,
    rag_snippets: str = "",
) -> str:
    """
    괴담 스레드 스타일 프롬프트 생성기
    - theme: 이야기 테마
    - era: 시대 배경
    - region_hint: 장소 범위 힌트
    - gore_level: 잔혹 묘사 레벨 (0~3)
    - target_chars: 목표 글자 수 (공백 포함)
    - topk: RAG 상위 스니펫 개수
    - rag_snippets: 참고할 RAG 컨텍스트
    """
    return f"""---
[콘셉트]
- 테마: {theme}
- 톤: 차분, 일상 대화체, 간헐적 긴장 고조
- 시대 배경: {era}
- 장소 범위: {region_hint}

[스타일 샘플 힌트(요약)]
- 스레드 시작에 OP가 상황을 짧게 개시
- 번호/ID/시각 라인 간헐 삽입: `12: 以下、名無しにかわりましてVIPがお送りします 2006/06/25(日) 06:13:57.84 ID:xxxx 以下、名無しにかわりましてVIPがお送りします(한글 번역 필수)`
- 중간에 사진/문서 언급은 “(사진 주의)” “(고서 이미지)” 등 텍스트로만

[금지/주의]
- 실존인물 실명·학교·병원·회사·번호·정확 주소 생성 금지
- 정치·종교 선동 금지, 특정 집단 비하 금지
- 잔혹 묘사는 암시 위주(레벨 {gore_level})
- 출력 길이 목표: 한글 공백 포함 {target_chars}자 ±10%

[RAG 컨텍스트 (상위 {topk}개 스니펫)]
{rag_snippets}

[요청]
위 컨텍스트의 **설정/정조/말맛**만 흡수해서 **완전한 신규 이야기**를 작성하라.
반드시 아래 형식을 따른다:
- “스레드 OP 도입 → 몇 개의 리플 번호/ID/시각 → OP 추가 사진/메모 → 요약/후일담 3줄” 순서.
- 리플 블록은 18~24개 범위, 각 1~2문장.
"""